# 获取代码
FROM bitnami/git:latest as gitcode
WORKDIR /Django
RUN git clone https://gitee.com/algernon-wan/automation.git

# 创建基础镜像
FROM  ubuntu:18.04
RUN mkdir -p /root/Django/
COPY --from=gitcode . /root/
RUN apt update && DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends software-properties-common 
RUN DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends wget build-essential checkinstall libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev libffi-dev zlib1g-dev && cd /opt/ && wget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tgz && tar xzf Python-3.9.0.tgz
