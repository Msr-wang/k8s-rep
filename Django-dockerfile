# 获取代码
FROM bitnami/git:latest as gitcode
WORKDIR /Django
RUN git clone https://gitee.com/algernon-wan/automation.git /Django

# create real app image
#FROM python:3.10.6-alpine3.16
FROM python:3.9.13-alpine3.16
RUN mkdir -p /root/Django/
COPY --from=gitcode /Django/ /root/Django
# --from=0  就是第一个from构键阶段
WORKDIR /root/Django/
RUN apk add gcc g++ make cmake gfortran libffi-dev openssl-dev libtool && pip3 install poetry && poetry install
